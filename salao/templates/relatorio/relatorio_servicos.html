{% extends 'base.html' %}
{% block content %}
  <h2 class="mb-4">Relatório - Serviços Concluídos</h2>

  <form method="get" class="row g-2">
    {% csrf_token %}
    {{ form.as_p }}
    <div class="col-auto">
      <button type="submit" class="btn btn-primary">Gerar relatório</button>
    </div>
  </form>

  {% if request.GET.start and request.GET.end %}
  <div class="mt-3">
    <a href="{% url 'relatorios:relatorio_servicos_download' %}?start={{ request.GET.start }}&end={{ request.GET.end }}" class="btn btn-success">
      <i class="bi bi-download"></i> Baixar relatório (Excel)
    </a>
  </br>
    <a href="https://dashbord-relatorio-salao.streamlit.app/" target="_blank" class="link-dashbord">
      <i class="bi bi-dashbord"></i> Link para acessar o Dashbord (insira o arquivo baixado)
    </a>
  </div>
  {% endif %}


  <h3>Resultados</h3>
  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <thead>
        <tr><th>Serviço</th><th>Total Concluídos</th></tr>
      </thead>
      <tbody>
        {% for row in data %}
        <tr><td>{{ row.servico__nome }}</td><td>{{ row.total }}</td></tr>
        {% empty %}
        <tr><td colspan="2" class="text-center">Nenhum resultado</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
